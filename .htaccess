<IfModule mod_rewrite.c>
    RewriteEngine On

    # --------------------------------------------------------
	# 1. CANONICALIZATION: FORCE HTTPS + WWW (Single Redirect)
	# --------------------------------------------------------
	# Redirect all http and non-www requests to https://www.bansallawyers.com.au
	RewriteCond %{HTTPS} off [OR]
	RewriteCond %{HTTP_HOST} !^www\.bansallawyers\.com\.au$ [NC]
	RewriteRule ^(.*)$ https://www.bansallawyers.com.au/$1 [L,R=301]

    # --------------------------------------------------------
    # 2. SEO REDIRECTS: OLD HTML/PHP URLs to Clean URLs (301)
    # --------------------------------------------------------
    RewriteRule ^case\.html$ case [R=301,L]
    RewriteRule ^corporate-law\.html$ corporate-law [R=301,L]
    RewriteRule ^family-law\.html$ family-law [R=301,L]
    RewriteRule ^about\.html$ about [R=301,L]
    RewriteRule ^serve-pdf\.php$ / [R=301,L]
    RewriteRule ^blog\.html$ blog [R=301,L]
    RewriteRule ^index\.html$ / [R=301,L]

    # --------------------------------------------------------
    # 3. CLEAN URLs: Remove Trailing Slashes (Except for Directories)
    # --------------------------------------------------------
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_URI} ^(.+)/$
    RewriteRule ^ %1 [L,R=301]

    # --------------------------------------------------------
    # 4. LARAVEL API: Handle Authorization Header
    # --------------------------------------------------------
    RewriteCond %{HTTP:Authorization} .
    RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization}]

    # --------------------------------------------------------
    # 5. LARAVEL ROUTING: Front Controller
    # --------------------------------------------------------
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^ index.php [L]

    # --------------------------------------------------------
    # 6. OPTIMIZATION: Disable MultiViews
    # --------------------------------------------------------
    <IfModule mod_negotiation.c>
        Options -MultiViews
    </IfModule>

</IfModule>

# --------------------------------------------------------
# 7. SECURITY: HSTS (HTTP Strict Transport Security)
# --------------------------------------------------------
<IfModule mod_headers.c>
    Header always set Strict-Transport-Security "max-age=31536000; includeSubDomains; preload"
</IfModule>

# --------------------------------------------------------
# 8. CACHING (Optional but Recommended)
# --------------------------------------------------------
# Speeds up your site and helps SEMrush see faster loads
<IfModule mod_expires.c>
    ExpiresActive On
    ExpiresByType image/jpg "access plus 1 year"
    ExpiresByType image/jpeg "access plus 1 year"
    ExpiresByType image/gif "access plus 1 year"
    ExpiresByType image/png "access plus 1 year"
    ExpiresByType text/css "access plus 1 month"
    ExpiresByType text/javascript "access plus 1 month"
    ExpiresByType application/javascript "access plus 1 month"
    ExpiresByType application/x-javascript "access plus 1 month"
    ExpiresByType image/x-icon "access plus 1 year"
    ExpiresDefault "access plus 2 days"
</IfModule>
