import"./alpine-utils-DUYmnTDj.js";import{a as e}from"./vendor-axios-CcrxTH1M.js";import"./vendor-alpine-COi9gVU0.js";const t={},a=function(e,a,s){let r=Promise.resolve();if(a&&a.length>0){let e=function(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))))};document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),n=(null==s?void 0:s.nonce)||(null==s?void 0:s.getAttribute("nonce"));r=e(a.map(e=>{if((e=function(e){return"/build/"+e}(e))in t)return;t[e]=!0;const a=e.endsWith(".css"),s=a?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${s}`))return;const r=document.createElement("link");return r.rel=a?"stylesheet":"modulepreload",a||(r.as="script"),r.crossOrigin="",r.href=e,n&&r.setAttribute("nonce",n),document.head.appendChild(r),a?new Promise((t,a)=>{r.addEventListener("load",t),r.addEventListener("error",()=>a(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function n(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return r.then(t=>{for(const e of t||[])"rejected"===e.status&&n(e.reason);return e().catch(n)})};let s=null;const r={defaultConfig:{create:!1,sortField:"text",searchField:"text",valueField:"value",labelField:"text",placeholder:"Select an option",allowEmptyOption:!0,closeAfterSelect:!0,hideSelected:!0,highlight:!0,loadingClass:"loading",noResultsText:"No results found",noResultsLoadingText:"Searching...",dropdownParent:"body",controlInput:null,render:{no_results:function(e,t){return'<div class="no-results">No results found for "'+t(e.input)+'"</div>'},loading:function(){return'<div class="loading">Searching...</div>'}}},ajaxConfig:{url:"",method:"GET",params:{},headers:{},processResults:function(e){return{results:e.data||e,pagination:e.pagination||{}}},cache:!1},async init(e,t={}){if(!s)try{const e=await a(()=>import("tom-select"),[]);s=e.default}catch(i){return this.initNativeSelect(e,t)}const r=document.querySelectorAll(e),n=[];return r.forEach(element=>{element.tomselect&&element.tomselect.destroy();const a={...this.defaultConfig,...t};a.url&&(a.load=(e,t)=>{this.loadAjaxData(e,a,t)});try{const e=new s(element,a);element.tomselect=e,n.push(e)}catch(i){this.initNativeSelect(e,t)}}),n},initNativeSelect:(e,t={})=>(document.querySelectorAll(e).forEach(element=>{element.classList.add("modern-select-native"),element.style.width="100%",element.style.padding="8px 12px",element.style.border="1px solid #d1d5db",element.style.borderRadius="6px",element.style.backgroundColor="#fff"}),[]),async loadAjaxData(e,t,a){try{const s={...t.ajaxConfig.params,q:e,page:1},r=new URL(t.ajaxConfig.url);Object.keys(s).forEach(e=>r.searchParams.append(e,s[e]));const n=await fetch(r,{method:t.ajaxConfig.method,headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest",...t.ajaxConfig.headers}});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const i=await n.json();a(t.ajaxConfig.processResults(i).results)}catch(s){a([])}},initWithTemplate(e,t,a={}){const s={...this.defaultConfig,...a,render:{...this.defaultConfig.render,...t}};return this.init(e,s)},destroy(e){document.querySelectorAll(e).forEach(element=>{element.tomselect&&(element.tomselect.destroy(),element.tomselect=null)})},getInstance(e){const element=document.querySelector(e);return(null==element?void 0:element.tomselect)||null}};window.modernSelect=r,window.modernSelectComponent=()=>({selector:"",config:{},instance:null,isLoading:!1,searchQuery:"",init(){this.selector=this.$el.getAttribute("data-selector")||".modern-select",this.config=this.getConfig(),this.$nextTick(()=>{this.initializeSelect()})},getConfig(){const e={placeholder:this.$el.getAttribute("data-placeholder")||"Select an option",url:this.$el.getAttribute("data-url")||null,multiple:this.$el.hasAttribute("data-multiple"),searchable:!this.$el.hasAttribute("data-no-search"),clearable:this.$el.hasAttribute("data-clearable")};return e.url&&(e.ajaxConfig={url:e.url,method:"GET",processResults:e=>({results:e.data||e,pagination:e.pagination||{}})}),e},initializeSelect(){try{const e=r.init(this.selector,this.config);this.instance=e[0],this.instance&&this.setupEventListeners()}catch(e){}},setupEventListeners(){this.instance&&(this.instance.on("loading",()=>{this.isLoading=!0}),this.instance.on("loaded",()=>{this.isLoading=!1}),this.instance.on("change",e=>{this.$dispatch("select-changed",{value:e,instance:this.instance})}),this.instance.on("search",e=>{this.searchQuery=e,this.$dispatch("select-search",{query:e,instance:this.instance})}))},addOption(e){this.instance&&this.instance.addOption(e)},addOptions(e){this.instance&&this.instance.addOptions(e)},setValue(e){this.instance&&this.instance.setValue(e)},getValue(){var e;return(null==(e=this.instance)?void 0:e.getValue())||null},clear(){this.instance&&this.instance.clear()},enable(){this.instance&&this.instance.enable()},disable(){this.instance&&this.instance.disable()},destroy(){this.instance&&(this.instance.destroy(),this.instance=null)}});const n={defaults:{timeout:3e4,headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}},getCSRFToken(){const e=document.querySelector('meta[name="csrf-token"]');return e?e.getAttribute("content"):null},setupDefaults(){const t=this.getCSRFToken();t&&(e.defaults.headers.common["X-CSRF-TOKEN"]=t),e.defaults.timeout=this.defaults.timeout,Object.assign(e.defaults.headers.common,this.defaults.headers)},async get(t,a={}){try{this.setupDefaults();const s=await e.get(t,a);return{success:!0,data:s.data,status:s.status,headers:s.headers}}catch(s){return this.handleError(s)}},async post(t,a={},s={}){try{this.setupDefaults();const r=await e.post(t,a,s);return{success:!0,data:r.data,status:r.status,headers:r.headers}}catch(r){return this.handleError(r)}},async put(t,a={},s={}){try{this.setupDefaults();const r=await e.put(t,a,s);return{success:!0,data:r.data,status:r.status,headers:r.headers}}catch(r){return this.handleError(r)}},async delete(t,a={}){try{this.setupDefaults();const s=await e.delete(t,a);return{success:!0,data:s.data,status:s.status,headers:s.headers}}catch(s){return this.handleError(s)}},async patch(t,a={},s={}){try{this.setupDefaults();const r=await e.patch(t,a,s);return{success:!0,data:r.data,status:r.status,headers:r.headers}}catch(r){return this.handleError(r)}},handleError(e){var t;return e.response?{success:!1,error:(null==(t=e.response.data)?void 0:t.message)||"Server error",status:e.response.status,data:e.response.data}:e.request?{success:!1,error:"Network error - no response received",status:0,data:null}:{success:!1,error:e.message||"Unknown error",status:0,data:null}},async uploadFile(t,a,s=null,r={}){try{this.setupDefaults();const n=new FormData;n.append("file",a);const i={...r,headers:{"Content-Type":"multipart/form-data",...r.headers},onUploadProgress:e=>{if(s){const t=Math.round(100*e.loaded/e.total);s(t)}}},o=await e.post(t,n,i);return{success:!0,data:o.data,status:o.status}}catch(n){return this.handleError(n)}},async batch(e){try{return this.setupDefaults(),(await Promise.allSettled(e)).map((e,t)=>"fulfilled"===e.status?{success:!0,data:e.value.data,status:e.value.status}:this.handleError(e.reason))}catch(t){return this.handleError(t)}}};window.ajaxUtils=n,window.ajaxComponent=()=>({isLoading:!1,error:null,data:null,async request(e,t,a=null,s={}){this.isLoading=!0,this.error=null,this.data=null;try{let r;switch(e.toLowerCase()){case"get":r=await n.get(t,s);break;case"post":r=await n.post(t,a,s);break;case"put":r=await n.put(t,a,s);break;case"delete":r=await n.delete(t,s);break;case"patch":r=await n.patch(t,a,s);break;default:throw new Error(`Unsupported HTTP method: ${e}`)}return r.success?(this.data=r.data,this.$dispatch("ajax-success",r)):(this.error=r.error,this.$dispatch("ajax-error",r)),r}catch(r){return this.error=r.message,this.$dispatch("ajax-error",{error:r.message}),{success:!1,error:r.message}}finally{this.isLoading=!1}},async get(e,t={}){return this.request("GET",e,null,t)},async post(e,t={},a={}){return this.request("POST",e,t,a)},async put(e,t={},a={}){return this.request("PUT",e,t,a)},async delete(e,t={}){return this.request("DELETE",e,null,t)},async patch(e,t={},a={}){return this.request("PATCH",e,t,a)}});const i={errors:{required:"This field is required.",email:"Please enter a valid email address.",captcha:"Captcha invalid.",max:"Number should be less than or equal to",min:"This field should be greater than or equal to",equal:"This field should be equal to"},rules:{required:e=>e&&e.trim().length>0,email:e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e),min:(e,t)=>parseFloat(e)>=parseFloat(t),max:(e,t)=>parseFloat(e)<=parseFloat(t),equal:(e,t)=>e===t,phone:e=>/^[\+]?[1-9][\d]{0,15}$/.test(e.replace(/\s/g,"")),url:e=>/^https?:\/\/.+/.test(e)},validateField(e){var t;const a=e.value,s=(null==(t=e.getAttribute("data-valid"))?void 0:t.split(" "))||[],r=[];for(const n of s){const[e,t]=n.split(":");this.rules[e]&&!this.rules[e](a,t)&&r.push(this.getErrorMessage(e,t))}return{isValid:0===r.length,errors:r}},getErrorMessage(e,t){switch(e){case"required":return this.errors.required;case"email":return this.errors.email;case"min":return`${this.errors.min} ${t}`;case"max":return`${this.errors.max} ${t}`;case"equal":return`${this.errors.equal} ${t}`;default:return"Invalid input"}},showFieldError(e,t){this.clearFieldError(e);const a=document.createElement("div");a.className="custom-error text-red-500 text-sm mt-1",a.textContent=t,e.parentNode.insertBefore(a,e.nextSibling),e.classList.add("border-red-500","focus:ring-red-500")},clearFieldError(e){const t=e.parentNode.querySelector(".custom-error");t&&t.remove(),e.classList.remove("border-red-500","focus:ring-red-500")},validateForm(e){const t=document.querySelector(`form[name="${e}"]`);if(!t)return!1;const a=t.querySelectorAll("[data-valid]");let s=!0,r=null;t.querySelectorAll(".custom-error").forEach(e=>e.remove()),t.querySelectorAll("input, select, textarea").forEach(e=>{e.classList.remove("border-red-500","focus:ring-red-500")});for(const n of a){const e=this.validateField(n);e.isValid||(s=!1,r||(r=n),e.errors.forEach(e=>{this.showFieldError(n,e)}))}return r&&r.focus(),s},init(e){const t=document.querySelector(`form[name="${e}"]`);t&&t.querySelectorAll("[data-valid]").forEach(e=>{e.addEventListener("blur",()=>{const t=this.validateField(e);t.isValid?this.clearFieldError(e):this.showFieldError(e,t.errors[0])}),e.addEventListener("input",()=>{this.clearFieldError(e)})})}};window.formValidation=i,window.formValidationComponent=()=>({formName:"",isValid:!1,errors:{},init(){this.formName=this.$el.getAttribute("data-form-name")||"",this.formName&&i.init(this.formName)},validate(){return this.isValid=i.validateForm(this.formName),this.isValid},validateField(e){const t=i.validateField(e);return t.isValid?i.clearFieldError(e):i.showFieldError(e,t.errors[0]),t.isValid}});let o=null;window.Alpine&&(window.Alpine.data("tomSelect",function(e={}){return{selected:null,instance:null,isLoading:!1,async init(){if(!o)try{const e=await a(()=>import("tom-select"),[]);o=e.default}catch(t){return}this.$nextTick(()=>{if(!this.$el)return;const a={plugins:["clear_button"],placeholder:e.placeholder||"Select an option",allowEmptyOption:!0,closeAfterSelect:!1!==e.closeAfterSelect,...e};try{this.instance=new o(this.$el,a),this.$el.value&&(this.selected=this.$el.value),this.instance.on("change",e=>{this.selected=e,this.$dispatch("tom-select:change",{value:e})})}catch(t){}})},destroy(){this.instance&&(this.instance.destroy(),this.instance=null)}}}),window.Alpine.data("tinyMCE",function(e={}){return{content:"",editor:null,isLoading:!1,async init(){"undefined"!=typeof tinymce&&this.$nextTick(()=>{if(!this.$el)return;this.content=this.$el.value||"";const t={target:this.$el,height:e.height||500,menubar:!1!==e.menubar,plugins:e.plugins||["advlist","autolink","lists","link","image","charmap","preview","anchor","searchreplace","visualblocks","code","fullscreen","insertdatetime","media","table","code","help","wordcount"],toolbar:e.toolbar||"undo redo | blocks | bold italic underline strikethrough | forecolor backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | blockquote | removeformat | link image media anchor | table | charmap | code preview fullscreen | help",content_style:e.contentStyle||'body { font-family: "Poppins", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Helvetica Neue", Arial, sans-serif; font-size: 14px }',setup:e=>{this.editor=e,e.on("change keyup",()=>{this.content=e.getContent(),this.$el&&(this.$el.value=this.content),this.$dispatch("tinymce:change",{content:this.content})}),this.content&&e.setContent(this.content)},...Object.fromEntries(Object.entries(e).filter(([e])=>!["height","menubar","plugins","toolbar","contentStyle"].includes(e)))};try{tinymce.init(t)}catch(a){}})},destroy(){this.editor&&(tinymce.remove(this.editor),this.editor=null)}}})),document.addEventListener("DOMContentLoaded",async function(){const e=[];document.querySelector(".datatable, table[data-datatable]")&&e.push("datatables"),document.querySelector('.modern-select, select[data-modern-select], select[x-data*="tomSelect"]')&&e.push("tom-select"),document.querySelector('textarea[data-tinymce], textarea[x-data*="tinyMCE"]')&&e.push("tinymce"),document.querySelector("#calendar, .calendar")&&e.push("fullcalendar"),document.querySelector(".datepicker, input[data-datepicker]")&&e.push("datepicker");try{const t=await(async(e=[])=>{const t={};for(const s of e)try{switch(s){case"datatables":window.$&&window.$.fn&&window.$.fn.DataTable&&(t.datatables={DataTables:window.$.fn.DataTable});break;case"tom-select":t.tomSelect=!0;break;case"tinymce":"undefined"!=typeof tinymce&&(t.tinymce=tinymce);break;case"fullcalendar":window.FullCalendar&&(t.fullcalendar=window.FullCalendar);break;case"datepicker":window.$&&window.$.fn&&window.$.fn.daterangepicker&&(t.datepicker=window.$.fn.daterangepicker)}}catch(a){}return t})(e);if(await((e=[])=>{const t=["/js/app.min.js","/js/daterangepicker.js","/js/bootstrap-timepicker.min.js","/js/bootstrap-formhelpers.min.js","/js/intlTelInput.js"].filter(t=>0===e.length||e.some(e=>t.includes(e)));return Promise.all(t.map(e=>new Promise((t,a)=>{const s=document.createElement("script");s.src=e,s.onload=t,s.onerror=a,document.head.appendChild(s)})))})(e),t.datatables&&window.$&&window.$.fn&&window.$.fn.DataTable&&(window.$.extend(window.$.fn.dataTable.defaults,{responsive:!0,processing:!0,serverSide:!1,deferRender:!0,scroller:{loadingIndicator:!0},dom:"lfrtip",language:{processing:"Loading...",emptyTable:"No data available"}}),$(".datatable, table[data-datatable]").DataTable()),t.tomSelect&&r.init(".modern-select:not([x-data]), select[data-modern-select]:not([x-data])",{placeholder:"Select an option",allowEmptyOption:!0,closeAfterSelect:!0,hideSelected:!0}).catch(e=>{}),t.fullcalendar){const{Calendar:e,dayGridPlugin:a,timeGridPlugin:s,interactionPlugin:r}=t.fullcalendar,n=document.getElementById("calendar");n&&new e(n,{plugins:[a.default,s.default,r.default],headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay"},initialDate:new Date,navLinks:!0,editable:!0,eventLimit:!0}).render()}t.datepicker&&window.$&&window.$.fn&&window.$.fn.datepicker&&$(".datepicker, input[data-datepicker]").datepicker({format:"yyyy-mm-dd",autoclose:!0,todayHighlight:!0}),window.performance&&window.performance.mark&&window.performance.mark("admin-bundle-loaded")}catch(t){}}),window.AdminBundle={initialized:!0,version:"2.0.0"};
