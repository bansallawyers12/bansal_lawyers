import"./alpine-utils-DEVg5VAh.js";import{a as e}from"./vendor-axios-CcrxTH1M.js";const t={};let a=null;const r={defaultConfig:{create:!1,sortField:"text",searchField:"text",valueField:"value",labelField:"text",placeholder:"Select an option",allowEmptyOption:!0,closeAfterSelect:!0,hideSelected:!0,highlight:!0,loadingClass:"loading",noResultsText:"No results found",noResultsLoadingText:"Searching...",dropdownParent:"body",controlInput:null,render:{no_results:function(e,t){return'<div class="no-results">No results found for "'+t(e.input)+'"</div>'},loading:function(){return'<div class="loading">Searching...</div>'}}},ajaxConfig:{url:"",method:"GET",params:{},headers:{},processResults:function(e){return{results:e.data||e,pagination:e.pagination||{}}},cache:!1},async init(e,r={}){if(!a)try{const e=await function(e,a){let r=Promise.resolve();if(a&&a.length>0){let e=function(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))))};document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),n=(null==s?void 0:s.nonce)||(null==s?void 0:s.getAttribute("nonce"));r=e(a.map(e=>{if((e=function(e){return"/build/"+e}(e))in t)return;t[e]=!0;const a=e.endsWith(".css"),r=a?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${r}`))return;const s=document.createElement("link");return s.rel=a?"stylesheet":"modulepreload",a||(s.as="script"),s.crossOrigin="",s.href=e,n&&s.setAttribute("nonce",n),document.head.appendChild(s),a?new Promise((t,a)=>{s.addEventListener("load",t),s.addEventListener("error",()=>a(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function s(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return r.then(e=>{for(const t of e||[])"rejected"===t.status&&s(t.reason);return import("tom-select").catch(s)})}(0,[]);a=e.default}catch(i){return this.initNativeSelect(e,r)}const s=document.querySelectorAll(e),n=[];return s.forEach(element=>{element.tomselect&&element.tomselect.destroy();const t={...this.defaultConfig,...r};t.url&&(t.load=(e,a)=>{this.loadAjaxData(e,t,a)});try{const e=new a(element,t);element.tomselect=e,n.push(e)}catch(i){this.initNativeSelect(e,r)}}),n},initNativeSelect:(e,t={})=>(document.querySelectorAll(e).forEach(element=>{element.classList.add("modern-select-native"),element.style.width="100%",element.style.padding="8px 12px",element.style.border="1px solid #d1d5db",element.style.borderRadius="6px",element.style.backgroundColor="#fff"}),[]),async loadAjaxData(e,t,a){try{const r={...t.ajaxConfig.params,q:e,page:1},s=new URL(t.ajaxConfig.url);Object.keys(r).forEach(e=>s.searchParams.append(e,r[e]));const n=await fetch(s,{method:t.ajaxConfig.method,headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest",...t.ajaxConfig.headers}});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const i=await n.json();a(t.ajaxConfig.processResults(i).results)}catch(r){a([])}},initWithTemplate(e,t,a={}){const r={...this.defaultConfig,...a,render:{...this.defaultConfig.render,...t}};return this.init(e,r)},destroy(e){document.querySelectorAll(e).forEach(element=>{element.tomselect&&(element.tomselect.destroy(),element.tomselect=null)})},getInstance(e){const element=document.querySelector(e);return(null==element?void 0:element.tomselect)||null}};window.modernSelect=r,window.modernSelectComponent=()=>({selector:"",config:{},instance:null,isLoading:!1,searchQuery:"",init(){this.selector=this.$el.getAttribute("data-selector")||".modern-select",this.config=this.getConfig(),this.$nextTick(()=>{this.initializeSelect()})},getConfig(){const e={placeholder:this.$el.getAttribute("data-placeholder")||"Select an option",url:this.$el.getAttribute("data-url")||null,multiple:this.$el.hasAttribute("data-multiple"),searchable:!this.$el.hasAttribute("data-no-search"),clearable:this.$el.hasAttribute("data-clearable")};return e.url&&(e.ajaxConfig={url:e.url,method:"GET",processResults:e=>({results:e.data||e,pagination:e.pagination||{}})}),e},initializeSelect(){try{const e=r.init(this.selector,this.config);this.instance=e[0],this.instance&&this.setupEventListeners()}catch(e){}},setupEventListeners(){this.instance&&(this.instance.on("loading",()=>{this.isLoading=!0}),this.instance.on("loaded",()=>{this.isLoading=!1}),this.instance.on("change",e=>{this.$dispatch("select-changed",{value:e,instance:this.instance})}),this.instance.on("search",e=>{this.searchQuery=e,this.$dispatch("select-search",{query:e,instance:this.instance})}))},addOption(e){this.instance&&this.instance.addOption(e)},addOptions(e){this.instance&&this.instance.addOptions(e)},setValue(e){this.instance&&this.instance.setValue(e)},getValue(){var e;return(null==(e=this.instance)?void 0:e.getValue())||null},clear(){this.instance&&this.instance.clear()},enable(){this.instance&&this.instance.enable()},disable(){this.instance&&this.instance.disable()},destroy(){this.instance&&(this.instance.destroy(),this.instance=null)}});const s={defaults:{timeout:3e4,headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}},getCSRFToken(){const e=document.querySelector('meta[name="csrf-token"]');return e?e.getAttribute("content"):null},setupDefaults(){const t=this.getCSRFToken();t&&(e.defaults.headers.common["X-CSRF-TOKEN"]=t),e.defaults.timeout=this.defaults.timeout,Object.assign(e.defaults.headers.common,this.defaults.headers)},async get(t,a={}){try{this.setupDefaults();const r=await e.get(t,a);return{success:!0,data:r.data,status:r.status,headers:r.headers}}catch(r){return this.handleError(r)}},async post(t,a={},r={}){try{this.setupDefaults();const s=await e.post(t,a,r);return{success:!0,data:s.data,status:s.status,headers:s.headers}}catch(s){return this.handleError(s)}},async put(t,a={},r={}){try{this.setupDefaults();const s=await e.put(t,a,r);return{success:!0,data:s.data,status:s.status,headers:s.headers}}catch(s){return this.handleError(s)}},async delete(t,a={}){try{this.setupDefaults();const r=await e.delete(t,a);return{success:!0,data:r.data,status:r.status,headers:r.headers}}catch(r){return this.handleError(r)}},async patch(t,a={},r={}){try{this.setupDefaults();const s=await e.patch(t,a,r);return{success:!0,data:s.data,status:s.status,headers:s.headers}}catch(s){return this.handleError(s)}},handleError(e){var t;return e.response?{success:!1,error:(null==(t=e.response.data)?void 0:t.message)||"Server error",status:e.response.status,data:e.response.data}:e.request?{success:!1,error:"Network error - no response received",status:0,data:null}:{success:!1,error:e.message||"Unknown error",status:0,data:null}},async uploadFile(t,a,r=null,s={}){try{this.setupDefaults();const n=new FormData;n.append("file",a);const i={...s,headers:{"Content-Type":"multipart/form-data",...s.headers},onUploadProgress:e=>{if(r){const t=Math.round(100*e.loaded/e.total);r(t)}}},o=await e.post(t,n,i);return{success:!0,data:o.data,status:o.status}}catch(n){return this.handleError(n)}},async batch(e){try{return this.setupDefaults(),(await Promise.allSettled(e)).map((e,t)=>"fulfilled"===e.status?{success:!0,data:e.value.data,status:e.value.status}:this.handleError(e.reason))}catch(t){return this.handleError(t)}}};window.ajaxUtils=s,window.ajaxComponent=()=>({isLoading:!1,error:null,data:null,async request(e,t,a=null,r={}){this.isLoading=!0,this.error=null,this.data=null;try{let n;switch(e.toLowerCase()){case"get":n=await s.get(t,r);break;case"post":n=await s.post(t,a,r);break;case"put":n=await s.put(t,a,r);break;case"delete":n=await s.delete(t,r);break;case"patch":n=await s.patch(t,a,r);break;default:throw new Error(`Unsupported HTTP method: ${e}`)}return n.success?(this.data=n.data,this.$dispatch("ajax-success",n)):(this.error=n.error,this.$dispatch("ajax-error",n)),n}catch(n){return this.error=n.message,this.$dispatch("ajax-error",{error:n.message}),{success:!1,error:n.message}}finally{this.isLoading=!1}},async get(e,t={}){return this.request("GET",e,null,t)},async post(e,t={},a={}){return this.request("POST",e,t,a)},async put(e,t={},a={}){return this.request("PUT",e,t,a)},async delete(e,t={}){return this.request("DELETE",e,null,t)},async patch(e,t={},a={}){return this.request("PATCH",e,t,a)}});const n={errors:{required:"This field is required.",email:"Please enter a valid email address.",captcha:"Captcha invalid.",max:"Number should be less than or equal to",min:"This field should be greater than or equal to",equal:"This field should be equal to"},rules:{required:e=>e&&e.trim().length>0,email:e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e),min:(e,t)=>parseFloat(e)>=parseFloat(t),max:(e,t)=>parseFloat(e)<=parseFloat(t),equal:(e,t)=>e===t,phone:e=>/^[\+]?[1-9][\d]{0,15}$/.test(e.replace(/\s/g,"")),url:e=>/^https?:\/\/.+/.test(e)},validateField(e){var t;const a=e.value,r=(null==(t=e.getAttribute("data-valid"))?void 0:t.split(" "))||[],s=[];for(const n of r){const[e,t]=n.split(":");this.rules[e]&&!this.rules[e](a,t)&&s.push(this.getErrorMessage(e,t))}return{isValid:0===s.length,errors:s}},getErrorMessage(e,t){switch(e){case"required":return this.errors.required;case"email":return this.errors.email;case"min":return`${this.errors.min} ${t}`;case"max":return`${this.errors.max} ${t}`;case"equal":return`${this.errors.equal} ${t}`;default:return"Invalid input"}},showFieldError(e,t){this.clearFieldError(e);const a=document.createElement("div");a.className="custom-error text-red-500 text-sm mt-1",a.textContent=t,e.parentNode.insertBefore(a,e.nextSibling),e.classList.add("border-red-500","focus:ring-red-500")},clearFieldError(e){const t=e.parentNode.querySelector(".custom-error");t&&t.remove(),e.classList.remove("border-red-500","focus:ring-red-500")},validateForm(e){const t=document.querySelector(`form[name="${e}"]`);if(!t)return!1;const a=t.querySelectorAll("[data-valid]");let r=!0,s=null;t.querySelectorAll(".custom-error").forEach(e=>e.remove()),t.querySelectorAll("input, select, textarea").forEach(e=>{e.classList.remove("border-red-500","focus:ring-red-500")});for(const n of a){const e=this.validateField(n);e.isValid||(r=!1,s||(s=n),e.errors.forEach(e=>{this.showFieldError(n,e)}))}return s&&s.focus(),r},init(e){const t=document.querySelector(`form[name="${e}"]`);t&&t.querySelectorAll("[data-valid]").forEach(e=>{e.addEventListener("blur",()=>{const t=this.validateField(e);t.isValid?this.clearFieldError(e):this.showFieldError(e,t.errors[0])}),e.addEventListener("input",()=>{this.clearFieldError(e)})})}};window.formValidation=n,window.formValidationComponent=()=>({formName:"",isValid:!1,errors:{},init(){this.formName=this.$el.getAttribute("data-form-name")||"",this.formName&&n.init(this.formName)},validate(){return this.isValid=n.validateForm(this.formName),this.isValid},validateField(e){const t=n.validateField(e);return t.isValid?n.clearFieldError(e):n.showFieldError(e,t.errors[0]),t.isValid}}),document.addEventListener("DOMContentLoaded",async function(){const e=[];document.querySelector(".datatable, table[data-datatable]")&&e.push("datatables"),document.querySelector(".modern-select, select[data-modern-select]")&&e.push("tom-select"),document.querySelector(".summernote, textarea[data-summernote]")&&e.push("summernote"),document.querySelector("#calendar, .calendar")&&e.push("fullcalendar"),document.querySelector(".datepicker, input[data-datepicker]")&&e.push("datepicker");try{const t=await(async(e=[])=>{const t={};for(const r of e)try{switch(r){case"datatables":window.$&&window.$.fn&&window.$.fn.DataTable&&(t.datatables={DataTables:window.$.fn.DataTable});break;case"tom-select":window.$&&window.$.fn&&window.$.fn.select2&&(t.select2=window.$.fn.select2);break;case"summernote":window.$&&window.$.fn&&window.$.fn.summernote&&(t.summernote=window.$.fn.summernote);break;case"fullcalendar":window.FullCalendar&&(t.fullcalendar=window.FullCalendar);break;case"datepicker":window.$&&window.$.fn&&window.$.fn.daterangepicker&&(t.datepicker=window.$.fn.daterangepicker)}}catch(a){}return t})(e);if(await((e=[])=>{const t=["/js/app.min.js","/js/daterangepicker.js","/js/bootstrap-timepicker.min.js","/js/bootstrap-formhelpers.min.js","/js/intlTelInput.js"].filter(t=>0===e.length||e.some(e=>t.includes(e)));return Promise.all(t.map(e=>new Promise((t,a)=>{const r=document.createElement("script");r.src=e,r.onload=t,r.onerror=a,document.head.appendChild(r)})))})(e),t.datatables&&window.$&&window.$.fn&&window.$.fn.DataTable&&(window.$.extend(window.$.fn.dataTable.defaults,{responsive:!0,processing:!0,serverSide:!1,deferRender:!0,scroller:{loadingIndicator:!0},dom:"lfrtip",language:{processing:"Loading...",emptyTable:"No data available"}}),$(".datatable, table[data-datatable]").DataTable()),t.tomSelect&&r.init(".modern-select, select[data-modern-select]",{placeholder:"Select an option",allowEmptyOption:!0,closeAfterSelect:!0,hideSelected:!0}).catch(e=>{}),t.summernote&&window.$&&window.$.fn&&window.$.fn.summernote&&$(".summernote, textarea[data-summernote]").summernote({height:300,minHeight:200,maxHeight:500,toolbar:[["style",["style"]],["font",["bold","italic","underline","clear"]],["fontname",["fontname"]],["color",["color"]],["para",["ul","ol","paragraph"]],["table",["table"]],["insert",["link","picture","video"]],["view",["fullscreen","codeview","help"]]]}),t.fullcalendar){const{Calendar:e,dayGridPlugin:a,timeGridPlugin:r,interactionPlugin:s}=t.fullcalendar,n=document.getElementById("calendar");n&&new e(n,{plugins:[a.default,r.default,s.default],headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay"},initialDate:new Date,navLinks:!0,editable:!0,eventLimit:!0}).render()}t.datepicker&&window.$&&window.$.fn&&window.$.fn.datepicker&&$(".datepicker, input[data-datepicker]").datepicker({format:"yyyy-mm-dd",autoclose:!0,todayHighlight:!0}),window.performance&&window.performance.mark&&window.performance.mark("admin-bundle-loaded")}catch(t){}}),window.AdminBundle={initialized:!0,version:"2.0.0"};
